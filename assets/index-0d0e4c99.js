(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))m(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&m(f)}).observe(document,{childList:!0,subtree:!0});function w(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function m(t){if(t.ep)return;t.ep=!0;const l=w(t);fetch(t.href,l)}})();console.log("Game start!");let e,y,i,o,a,h,v,g,s,x,b,C,D,T,L,n,S,u,Y,E;var d=0,c=3,N=2;let O="Carrots: "+d,P="Lives: "+c;window.setup=()=>{u=loadImage("./assets/heart.png"),Y=loadImage("./assets/carrot-uncollected.png"),E=loadImage("./assets/carrot-small.png"),createCanvas(800,500),background("lightblue"),world.gravity.y=90,d=0,e=new Sprite(-750,450),x=loadAnimation("./assets/player-idle-1.png","./assets/player-idle-2.png"),x.frameDelay=30,e.width=48,e.height=112,e.shapeColor=color("red"),e.rotationLock=!0,b=loadAnimation("./assets/player-jump.png"),b.frameDelay=200,C=loadAnimation("./assets/player-success.png"),D=loadAnimation("./assets/player-damage-1.png"),T=loadAnimation("./assets/bug-1.png","./assets/bug-2.png"),n=new Group,n.width=30,n.height=4e3,n.collider="static",n.visible=!1,g=new Group,g.width=200,g.height=400,g.collider="static",g.img="./assets/barn.png",y=new Group,y.collider="static",y.friction=0,v=new Sprite(0,800,1e5,50),v.collider="static",i=new Group,i.w=115,i.h=25,i.tile="=",i.collider="static",i.friction=0,i.img="./assets/Platform.png",a=new Group,a.w=115,a.h=20,a.collider="static",a.friction=0,a.img="./assets/falling.png",o=new Group,o.w=50,o.h=50,o.collider="static",S=loadAnimation("./assets/carrot-1.png","./assets/carrot-2.png","./assets/carrot-3.png","./assets/carrot-4.png"),S.frameDelay=32,s=new Group,s.w=56,s.h=56,s.friction=0,s.collider="kinematic";{console.log("You're on level "+N);let r=new n.Sprite(400,-500);r.rotation=90,new n.Sprite(-790,250),new n.Sprite(8e3,250),new y.Sprite(0,500,5600,50);let p=new y.Sprite(4e3,500,700,50);p.img="./assets/g2.png";let w=new s.Sprite;w.x=1250,w.y=450;let m=new s.Sprite;m.x=1750,m.y=450;let t=new o.Sprite;t.x=250,t.y=125;let l=new o.Sprite;l.x=900,l.y=425;let f=new o.Sprite;f.x=1850,f.y=400;let A=new o.Sprite;A.x=2750,A.y=400;let G=new o.Sprite;G.x=2975,G.y=50,e.overlaps(o,R),h=new a.Sprite,h.x=6e3,h.y=350,new Tiles(["........................................","........................................","........................................","....=...................................","......==................................","........................................","........................................","..........=.............................","...........==...........................","........................................","........................................","..............==........................","...................................=....","........................................","........................................","........................................","........................................","......................==.........==.....",".................=....==................",".......=.........=....==........=.......","...=...=.........=....==................","...=...=.........=....==................"],0,-150,i.w+4,i.h+4);let I=new g.Sprite(5e3,350);e.overlaps(I)}};window.draw=()=>{background("lightblue"),c==3?(image(u,150,50),image(u,100,50),image(u,50,50)):c==2?(image(u,100,50),image(u,50,50)):c==1&&image(u,50,50);for(let r=1;r<6;r++)image(Y,450+r*50,40);for(let r=0;r<d;r++)image(E,500+r*50,40);if(O="Carrots: "+d,text(O,400,60),P="Lives: "+c,text(P,300,60),L="",text(L,width/2,150),textAlign(CENTER),text("("+mouseX+", "+mouseY+")",mouseX,mouseY),allSprites.debug=mouse.pressing(),o.ani=S,e.overlapped(o)&&(d+=1,console.log("You collected a carrot!"),console.log(d)),s.ani=T,camera.x=e.x,e.y<30?camera.y=e.y-50:camera.y=275,kb.pressing("right")?(e.vel.x=5,e.mirror.x=!1):kb.pressing("left")?(e.vel.x=-5,e.mirror.x=!0):(e.vel.x=0,e.ani=x),kb.presses("up")?(e.vel.y=-27,e.ani=b):kb.pressing("down")&&(e.vel.y=50),e.collides(a)&&(a.collider="dynamic"),e.overlapping(g)){let r="Woohoo! You made it to the end with "+d+" carrots!! Please refresh to play again!";text(r,width/2,150),textAlign(CENTER),console.log("That's the end! Thanks for playing."),e.ani=C}else e.collides(v)&&(c-=1,k(),console.log("Uh oh, you fell!"));e.collides(s)&&(c-=1,e.ani=D),c==0&&M()};function k(){e.vel.x=0,e.vel.y=0,e.x=-750,e.y=450}function R(r,p){p.remove()}function M(){e.remove();let r="Game Over. You ran out of lives! Refresh to restart.";text(r,250,200)}
